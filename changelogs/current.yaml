date: Pending

behavior_changes:
# *Changes that are expected to cause an incompatibility if applicable; deployment changes are likely required*

minor_behavior_changes:
# *Changes that may cause incompatibilities for some users, but should not for most*
- area: ext_proc
  change: |
    Use one of a hard-coded set of error messages when a :ref:`HeaderMutation
    <envoy_v3_api_msg_service.ext_proc.v3.HeaderMutation>` fails. Removing
    request-specific details allows grouping by similar failure types. Detailed
    messages remain available in debug logs.
- area: mobile
  change: |
    Use mobile specific network observer registries to propagate network change signals. This behavior can be reverted by
    setting the runtime guard ``envoy.reloadable_features.mobile_use_network_observer_registry``.

bug_fixes:
# *Changes expected to improve the state of the world and are unlikely to have negative effects*
- area: lua
  change: |
    Fix a bug where Lua filters may result in Envoy crashes when setting response body to a
    larger payload (greater than the body buffer limit).
- area: connection pool
  change: |
    Fix a crash in the TCP connection pool that occurs during downstream connection teardown when large requests
    or responses trigger flow control.

removed_config_or_runtime:
# *Normally occurs at the end of the* :ref:`deprecation period <deprecated>`
- area: jwt_authn
  change: |
    Removed runtime guard ``envoy.reloadable_features.jwt_fetcher_use_scheme_from_uri`` and legacy code paths.
- area: http
  change: |
    Removed runtime guard ``envoy.reloadable_features.http1_balsa_allow_cr_or_lf_at_request_start`` and legacy code paths.
- area: quic
  change: |
    Removed runtime guard ``envoy.reloadable_features.http3_remove_empty_cookie`` and legacy code paths.
- area: http
  change: |
    Removed runtime guard ``envoy.reloadable_features.original_src_fix_port_exhaustion`` and legacy code paths.

new_features:
- area: lua
  change: |
    Added ``drainConnectionUponCompletion()`` to the Lua filter stream info API. This allows Lua scripts
    to mark connections for draining, which adds a ``Connection: close`` header for HTTP/1.1 or sends a
    ``GOAWAY`` frame for HTTP/2 and HTTP/3.
- area: wasm
  change: |
    Added ``sign`` foreign function to create cryptographic signatures.
    See :ref:`Wasm foreign functions <arch_overview_wasm_foreign_functions>` for more details.
- area: redis
  change: |
    Added cluster-scope command support with flexible response handling framework.
- area: overload management
  change: |
    The fixed heap resource monitor can now calculate memory pressure as currently allocated memory divided by maximum heap size,
    giving more accurate and lower memory pressure values.
    This can avoid unnecessary load shedding or overload actions.
    To enable, set ``envoy.reloadable_features.fixed_heap_use_allocated`` to true.
    The default algorithm (heap_size - pageheap_unmapped - pageheap_free) does not discount for free memory in TCMalloc caches.

deprecated:
