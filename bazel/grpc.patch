diff --git a/BUILD b/BUILD
index fdc12602ed..617ad884cf 100644
--- a/BUILD
+++ b/BUILD
@@ -33,7 +33,7 @@ package(
     default_visibility = ["//visibility:public"],
     features = [
         "-parse_headers",
-        "layering_check",
+        "-layering_check",
     ],
 )
 
diff --git a/bazel/generate_cc.bzl b/bazel/generate_cc.bzl
index a2c7f3a1bb..cd023ebb06 100644
--- a/bazel/generate_cc.bzl
+++ b/bazel/generate_cc.bzl
@@ -134,7 +134,7 @@ def generate_cc_impl(ctx):
 
     # Include the output directory so that protoc puts the generated code in the
     # right directory.
-    arguments.append("--proto_path={0}{1}".format(dir_out, proto_root))
+    arguments.append("--proto_path={0}".format(dir_out))
     arguments += [_get_srcs_file_path(proto) for proto in protos]
 
     # create a list of well known proto files if the argument is non-None
diff --git a/src/core/BUILD b/src/core/BUILD
index 1acce192d0..c7c92db880 100644
--- a/src/core/BUILD
+++ b/src/core/BUILD
@@ -25,7 +25,7 @@ licenses(["reciprocal"])
 package(
     default_visibility = ["//:__subpackages__"],
     features = [
-        "layering_check",
+        "-layering_check",
     ],
 )
 
diff --git a/third_party/BUILD b/third_party/BUILD
index 77cb52d0fc..596b348ccd 100644
--- a/third_party/BUILD
+++ b/third_party/BUILD
@@ -18,19 +18,19 @@ package(default_visibility = ["//:__subpackages__"])
 
 alias(
     name = "libssl",
-    actual = "@boringssl//:ssl",
+    actual = "@envoy//bazel:boringssl",
     tags = ["manual"],
 )
 
 alias(
     name = "libcrypto",
-    actual = "@boringssl//:crypto",
+    actual = "@envoy//bazel:boringcrypto",
     tags = ["manual"],
 )
 
 alias(
     name = "madler_zlib",
-    actual = "@zlib//:zlib",
+    actual = "@envoy//bazel/foreign_cc:zlib",
     tags = ["manual"],
 )
 
@@ -61,7 +61,7 @@ alias(
 
 alias(
     name = "cares",
-    actual = "@com_github_cares_cares//:ares",
+    actual = "@envoy//bazel/foreign_cc:ares",
     tags = ["manual"],
 )
 
