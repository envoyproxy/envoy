From f538b4df0db59fac52b25e7b16adc0e446d23f27 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Alejandro=20R=20Sede=C3=B1o?= <asedeno@google.com>
Date: Sat, 14 Sep 2024 12:54:55 -0400
Subject: [PATCH 2/9] remove custom and apparently unused zlib
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This appears to be used by @com_google_protobuf, but it brings in a
newer version anyhow.

Signed-off-by: Alejandro R Sede√±o <asedeno@google.com>
---
 repositories.bzl | 65 ------------------------------------------------
 1 file changed, 65 deletions(-)

diff --git a/repositories.bzl b/repositories.bzl
index 0e1c006..2dc200d 100644
--- a/repositories.bzl
+++ b/repositories.bzl
@@ -25,71 +25,6 @@ def absl_repositories(bind = True):
         urls = ["https://github.com/abseil/abseil-cpp/archive/c2435f8342c2d0ed8101cb43adfd605fdc52dca2.zip"],
     )
 
-def zlib_repositories(bind = True):
-    BUILD = """
-# Copyright 2016 Google Inc. All Rights Reserved.
-#
-# Licensed under the Apache License, Version 2.0 (the "License");
-# you may not use this file except in compliance with the License.
-# You may obtain a copy of the License at
-#
-#    http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-#
-################################################################################
-#
-licenses(["notice"])
-exports_files(["README"])
-cc_library(
-    name = "zlib",
-    srcs = [
-        "adler32.c",
-        "crc32.c",
-        "crc32.h",
-        "deflate.c",
-        "deflate.h",
-        "infback.c",
-        "inffast.c",
-        "inffast.h",
-        "inffixed.h",
-        "inflate.c",
-        "inflate.h",
-        "inftrees.c",
-        "inftrees.h",
-        "trees.c",
-        "trees.h",
-        "zconf.h",
-        "zutil.c",
-        "zutil.h",
-    ],
-    hdrs = [
-        "zlib.h",
-    ],
-    copts = [
-        "-Wno-shift-negative-value",
-        "-Wno-unknown-warning-option",
-    ],
-    defines = [
-        "Z_SOLO",
-    ],
-    visibility = [
-        "//visibility:public",
-    ],
-)
-"""
-    http_archive(
-        name = "zlib",
-        strip_prefix = "zlib-1.2.11",
-        urls = ["https://github.com/madler/zlib/archive/v1.2.11.tar.gz"],
-        sha256 = "629380c90a77b964d896ed37163f5c3a34f6e6d897311f1df2a7016355c45eff",
-        build_file_content = BUILD,
-    )
-
 PROTOBUF_COMMIT = "315ffb5be89460f2857387d20aefc59b76b8bdc3"  # May 31, 2023
 PROTOBUF_SHA256 = "aa61db6ff113a1c76eac9408144c6e996c5e2d6b2410818fd7f1b0d222a50bf8"
 
-- 
2.46.0.662.g92d0881bb0-goog

