# TODO(dio): Consider to remove compiler specific part of this patch when we solely compile the
# project using clang-cl. Tracked in https://github.com/envoyproxy/envoy/issues/11974.

diff --git a/base/compiler_specific.h b/base/compiler_specific.h
index 0174b6d..fb5b80d 100644
--- a/base/compiler_specific.h
+++ b/base/compiler_specific.h
@@ -7,10 +7,6 @@
 
 #include "build/build_config.h"
 
-#if defined(COMPILER_MSVC) && !defined(__clang__)
-#error "Only clang-cl is supported on Windows, see https://crbug.com/988071"
-#endif
-
 // A wrapper around `__has_attribute()`, which is similar to the C++20-standard
 // `__has_cpp_attribute()`, but tests for support for `__attribute__(())`s.
 // Compilers that do not support this (e.g. MSVC) are also assumed not to
diff --git a/base/numerics/clamped_math_impl.h b/base/numerics/clamped_math_impl.h
index 10023f0..783f5da 100644
--- a/base/numerics/clamped_math_impl.h
+++ b/base/numerics/clamped_math_impl.h
@@ -31,6 +31,7 @@
 template <typename T>
   requires(std::unsigned_integral<T>)
 constexpr T SaturatedNegWrapper(T value) {
+  (void)value; // unused
   return T(0);
 }

diff --git a/build_config/BUILD b/build_config/BUILD
index 78ac01d..eeef238 100644
--- a/build_config/BUILD
+++ b/build_config/BUILD
@@ -5,11 +5,13 @@
 config_setting(
     name = "windows_x86_64",
     values = {"cpu": "x64_windows"},
+    visibility = ["//visibility:public"],
 )

 bool_flag(
     name = "system_icu",
     build_setting_default = True,
+    visibility = ["//visibility:public"],
 )

 config_setting(
@@ -17,4 +19,5 @@
     flag_values = {
         ":system_icu": "True",
     },
+    visibility = ["//visibility:public"],
 )
