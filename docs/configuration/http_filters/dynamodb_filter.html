

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>DynamoDB &mdash; envoy 1.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="envoy 1.0.0 documentation" href="../../index.html"/>
        <link rel="up" title="HTTP filters" href="http_filters.html"/>
        <link rel="next" title="gRPC HTTP/1.1 bridge" href="grpc_http1_bridge_filter.html"/>
        <link rel="prev" title="Buffer" href="buffer_filter.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> envoy
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/install.html">Building and installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../configuration.html">Configuration reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network_filters/network_filters.html">Network filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../http_conn_man/http_conn_man.html">HTTP connection manager</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="http_filters.html">HTTP filters</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="buffer_filter.html">Buffer</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">DynamoDB</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#statistics">Statistics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#runtime">Runtime</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="grpc_http1_bridge_filter.html">gRPC HTTP/1.1 bridge</a></li>
<li class="toctree-l3"><a class="reference internal" href="health_check_filter.html">Health check</a></li>
<li class="toctree-l3"><a class="reference internal" href="rate_limit_filter.html">Rate limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="router_filter.html">Router</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_manager/cluster_manager.html">Cluster manager</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extending/extending.html">Extending Envoy for custom use cases</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">envoy</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../configuration.html">Configuration reference</a> &raquo;</li>
      
          <li><a href="http_filters.html">HTTP filters</a> &raquo;</li>
      
    <li>DynamoDB</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/configuration/http_filters/dynamodb_filter.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dynamodb">
<span id="config-http-filters-dynamo"></span><h1>DynamoDB<a class="headerlink" href="#dynamodb" title="Permalink to this headline">¶</a></h1>
<p>DynamoDB <a class="reference internal" href="../../intro/arch_overview/dynamo.html#arch-overview-dynamo"><span class="std std-ref">architecture overview</span></a>.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;both&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;http_dynamo_filter&quot;</span><span class="p">,</span>
  <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils">
<dt>type</dt>
<dd><em>(required, string)</em> Filter type. The only supported value is <cite>both</cite>.</dd>
<dt>name</dt>
<dd><em>(required, string)</em> Filter name. The only supported value is <cite>http_dynamo_filter</cite>.</dd>
<dt>config</dt>
<dd><em>(required, object)</em> The filter does not use any configuration.</dd>
</dl>
<div class="section" id="statistics">
<h2>Statistics<a class="headerlink" href="#statistics" title="Permalink to this headline">¶</a></h2>
<p>The DynamoDB filter outputs statistics in the <em>http.&lt;stat_prefix&gt;.dynamodb.</em> namespace. The
<a class="reference internal" href="../http_conn_man/http_conn_man.html#config-http-conn-man-stat-prefix"><span class="std std-ref">stat prefix</span></a> comes from the owning HTTP connection manager.</p>
<p>Per operation stats can be found in the <em>http.&lt;stat_prefix&gt;.dynamodb.operation.&lt;operation_name&gt;.</em>
namespace.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>upstream_rq_total</td>
<td>Counter</td>
<td>Total number of requests with &lt;operation_name&gt;</td>
</tr>
<tr class="row-odd"><td>upstream_rq_time</td>
<td>Timer</td>
<td>Time spent on &lt;operation_name&gt;</td>
</tr>
<tr class="row-even"><td>upstream_rq_total_xxx</td>
<td>Counter</td>
<td>Total number of requests with &lt;operation_name&gt; per response code (503/2xx/etc)</td>
</tr>
<tr class="row-odd"><td>upstream_rq_time_xxx</td>
<td>Timer</td>
<td>Time spent on &lt;operation_name&gt; per response code (400/3xx/etc)</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Per table stats can be found in the <em>http.&lt;stat_prefix&gt;.dynamodb.table.&lt;table_name&gt;.</em> namespace.
Most of the operations to DynamoDB involve a single table, but BatchGetItem and BatchWriteItem can
include several tables, Envoy tracks per table stats in this case only if it is the same table used
in all operations from the batch.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>upstream_rq_total</td>
<td>Counter</td>
<td>Total number of requests on &lt;table_name&gt; table</td>
</tr>
<tr class="row-odd"><td>upstream_rq_time</td>
<td>Timer</td>
<td>Time spent on &lt;table_name&gt; table</td>
</tr>
<tr class="row-even"><td>upstream_rq_total_xxx</td>
<td>Counter</td>
<td>Total number of requests on &lt;table_name&gt; table per response code (503/2xx/etc)</td>
</tr>
<tr class="row-odd"><td>upstream_rq_time_xxx</td>
<td>Timer</td>
<td>Time spent on &lt;table_name&gt; table per response code (400/3xx/etc)</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Additional detailed stats:</p>
<ul>
<li><p class="first">For 4xx responses and partial batch operation failures, the total number of failures for a given
table and failure are tracked in the <em>http.&lt;stat_prefix&gt;.dynamodb.error.&lt;table_name&gt;.</em> namespace.</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&lt;error_type&gt;</td>
<td>Counter</td>
<td>Total number of specific &lt;error_type&gt; for a given &lt;table_name&gt;</td>
</tr>
<tr class="row-odd"><td>BatchFailureUnprocessedKeys</td>
<td>Counter</td>
<td>Total number of partial batch failures for a given &lt;table_name&gt;</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
<div class="section" id="runtime">
<h2>Runtime<a class="headerlink" href="#runtime" title="Permalink to this headline">¶</a></h2>
<p>The DynamoDB filter supports the following runtime settings:</p>
<dl class="docutils">
<dt>dynamodb.filter_enabled</dt>
<dd>The % of requests for which the filter is enabled. Default is 100%.</dd>
</dl>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="grpc_http1_bridge_filter.html" class="btn btn-neutral float-right" title="gRPC HTTP/1.1 bridge" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="buffer_filter.html" class="btn btn-neutral" title="Buffer" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Lyft.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>