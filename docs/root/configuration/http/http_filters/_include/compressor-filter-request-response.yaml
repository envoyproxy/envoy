    http_filters:
    # This filter is only enabled for responses.
    - name: envoy.filters.http.compressor
      typed_config:
        "@type": type.googleapis.com/envoy.extensions.filters.http.compressor.v3.Compressor
        request_direction_config:
          common_config:
            enabled:
              default_value: false
              runtime_key: request_compressor_enabled
        compressor_library:
          name: for_response
          typed_config:
            "@type": type.googleapis.com/envoy.extensions.compression.gzip.compressor.v3.Gzip
            memory_level: 3
            window_bits: 10
            compression_level: BEST_COMPRESSION
            compression_strategy: DEFAULT_STRATEGY
    # This filter is only enabled for requests.
    - name: envoy.filters.http.compressor
      typed_config:
        "@type": type.googleapis.com/envoy.extensions.filters.http.compressor.v3.Compressor
        response_direction_config:
          common_config:
            enabled:
              default_value: false
              runtime_key: response_compressor_enabled
        request_direction_config:
          common_config:
            enabled:
              default_value: true
              runtime_key: request_compressor_enabled
        compressor_library:
          name: for_request
          typed_config:
            "@type": type.googleapis.com/envoy.extensions.compression.gzip.compressor.v3.Gzip
            memory_level: 9
            window_bits: 15
            compression_level: BEST_SPEED
            compression_strategy: DEFAULT_STRATEGY
